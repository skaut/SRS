parameters:

application:
    errorPresenter: Error
    mapping:
        *: App\*Module\Presenters\*Presenter

session:
    expiration: 14 days

services:
    - App\Router\RouterFactory
    router: @App\Router\RouterFactory::createRouter
    authenticator: App\Services\Authenticator
    console.application: Contributte\Console\Application
    -
        factory: Joseki\Application\Responses\PdfResponse
        setup:
            - $mpdfConfig([tempDir: %tempDir%/mpdf])

    - App\Services\Authorizator
    - App\Services\AclService
    - App\Services\ApplicationService
    - App\Services\BankService
    - App\Services\CmsService
    - App\Services\DatabaseService(%appDir%/..)
    - App\Services\DiscountService
    - App\Services\ExcelExportService
    - App\Services\FilesService(%wwwDir%/files)
    - App\Services\MailService
    - App\Services\ProgramService
    - App\Services\SettingsService
    - App\Services\SkautIsEventEducationService
    - App\Services\SkautIsEventGeneralService
    - App\Services\SkautIsService
    - App\Services\SubeventService
    - App\Services\UserService

    - App\Commands\ClearCacheCommand(%appDir%/..)
    - App\ApiModule\Services\ScheduleService
    - App\Utils\Validators

    - class: App\Model\User\Commands\Handlers\RegisterProgramHandler
      tags: [commandBus.handler]
    - class: App\Model\User\Commands\Handlers\UnregisterProgramHandler
      tags: [commandBus.handler]
    - class: App\Model\User\Commands\Handlers\UpdateUsersProgramsHandler
      tags: [commandBus.handler]

    - class: App\Model\Program\Queries\Handlers\BlockAttendeesQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\Program\Queries\Handlers\ProgramAlternatesCountQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\Program\Queries\Handlers\ProgramAlternatesQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\Program\Queries\Handlers\ProgramAttendeesCountQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\Program\Queries\Handlers\ProgramAttendeesQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\User\Queries\Handlers\UserAllowedProgramsQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\User\Queries\Handlers\UserProgramBlocksQueryHandler
      tags: [queryBus.handler]
    - class: App\Model\User\Queries\Handlers\UserProgramsQueryHandler
      tags: [queryBus.handler]

    - class: App\Model\Acl\Events\Subscribers\CategoryUpdatedEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\Acl\Events\Subscribers\RoleUpdatedEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\Mailing\Events\Subscribers\ProgramRegisteredEventMailListener
      tags: [eventBus.subscriber]
    - class: App\Model\Mailing\Events\Subscribers\ProgramUnregisteredEventMailListener
      tags: [eventBus.subscriber]
    - class: App\Model\Program\Events\Subscribers\BlockUpdatedEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\Program\Events\Subscribers\ProgramCreatedEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\User\Events\Subscribers\ProgramRegisteredEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\User\Events\Subscribers\ProgramUnregisteredEventListener
      tags: [eventBus.subscriber]
    - class: App\Model\User\Events\Subscribers\UserApplicationUpdatedEventListener
      tags: [eventBus.subscriber]

    permissionRepository:
        class: App\Model\Acl\Repositories\PermissionRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Acl\Permission)
    resourceRepository:
        class: App\Model\Acl\Repositories\SrsResourceRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Acl\SrsResource)
    roleRepository:
        class: App\Model\Acl\Repositories\RoleRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Acl\Role)
    applicationRepository:
        class: App\Model\Application\Repositories\ApplicationRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Application\Application)
    incomeProofRepository:
        class: App\Model\Application\Repositories\IncomeProofRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Application\IncomeProof)
    rolesApplicationRepository:
        class: App\Model\Application\Repositories\RolesApplicationRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Application\RolesApplication)
    subeventsApplicationRepository:
        class: App\Model\Application\Repositories\SubeventsApplicationRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Application\SubeventsApplication)
    variableSymbolRepository:
        class: App\Model\Application\Repositories\VariableSymbolRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Application\VariableSymbol)
    contentRepository:
        class: App\Model\Cms\Repositories\ContentRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\Content)
    documentRepository:
        class: App\Model\Cms\Repositories\DocumentRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\Document)
    faqRepository:
        class: App\Model\Cms\Repositories\FaqRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\Faq)
    newsRepository:
        class: App\Model\Cms\Repositories\NewsRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\News)
    pageRepository:
        class: App\Model\Cms\Repositories\PageRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\Page)
    tagRepository:
        class: App\Model\Cms\Repositories\TagRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Cms\Tag)
    customInputRepository:
        class: App\Model\CustomInput\Repositories\CustomInputRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\CustomInput\CustomInput)
    customInputValueRepository:
        class: App\Model\CustomInput\Repositories\CustomInputValueRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\CustomInput\CustomInputValue)
    mailRepository:
        class: App\Model\Mailing\Repositories\MailRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Mailing\Mail)
    templateRepository:
        class: App\Model\Mailing\Repositories\TemplateRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Mailing\Template)
    paymentRepository:
        class: App\Model\Payment\Repositories\PaymentRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Payment\Payment)
    blockRepository:
        class: App\Model\Program\Repositories\BlockRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Program\Block)
    categoryRepository:
        class: App\Model\Program\Repositories\CategoryRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Program\Category)
    programApplicationRepository:
        class: App\Model\Program\Repositories\ProgramApplicationRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Program\ProgramApplication)
    programRepository:
        class: App\Model\Program\Repositories\ProgramRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Program\Program)
    roomRepository:
        class: App\Model\Program\Repositories\RoomRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Program\Room)
    placePointRepository:
        class: App\Model\Settings\Repositories\PlacePointRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Settings\PlacePoint)
    settingsRepository:
        class: App\Model\Settings\Repositories\SettingsRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Settings\Settings)
    skautIsCourseRepository:
        class: App\Model\SkautIs\Repositories\SkautIsCourseRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\SkautIs\SkautIsCourse)
    discountRepository:
        class: App\Model\Structure\Repositories\DiscountRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Structure\Discount)
    subeventRepository:
        class: App\Model\Structure\Repositories\SubeventRepository
        inject: yes
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\Structure\Subevent)
    userRepository:
        class: App\Model\User\Repositories\UserRepository
        factory: @Doctrine\ORM\EntityManagerInterface::getRepository(App\Model\User\User)

    - App\WebModule\Components\IApplicationContentControlFactory
    - App\WebModule\Components\IBlocksContentControlFactory
    - App\WebModule\Components\ICapacitiesContentControlFactory
    - App\WebModule\Components\IDocumentContentControlFactory
    - App\WebModule\Components\IFaqContentControlFactory
    - App\WebModule\Components\IHtmlContentControlFactory
    - App\WebModule\Components\IImageContentControlFactory
    - App\WebModule\Components\INewsContentControlFactory
    - App\WebModule\Components\IPlaceContentControlFactory
    - App\WebModule\Components\IProgramsContentControlFactory
    - App\WebModule\Components\ITextContentControlFactory
    - App\WebModule\Components\IUsersContentControlFactory
    - App\WebModule\Components\ILectorsContentControlFactory
    - App\WebModule\Components\IApplicationsGridControlFactory
    - App\WebModule\Components\IOrganizerContentControlFactory
    - App\WebModule\Components\IContactFormContentControlFactory

    - App\WebModule\Forms\BaseFormFactory
    - App\WebModule\Forms\IAdditionalInformationFormFactory
    - App\WebModule\Forms\ApplicationFormFactory
    - App\WebModule\Forms\FaqFormFactory
    - App\WebModule\Forms\PersonalDetailsFormFactory
    - App\WebModule\Forms\RolesFormFactory
    - App\WebModule\Forms\IContactFormFactory

    - App\AdminModule\Components\IApplicationsGridControlFactory
    - App\AdminModule\Components\IRolesGridControlFactory
    - App\AdminModule\Components\IUsersGridControlFactory
    - App\AdminModule\CmsModule\Components\IDocumentsGridControlFactory
    - App\AdminModule\CmsModule\Components\IDocumentTagsGridControlFactory
    - App\AdminModule\CmsModule\Components\IFaqGridControlFactory
    - App\AdminModule\CmsModule\Components\INewsGridControlFactory
    - App\AdminModule\CmsModule\Components\IPagesGridControlFactory
    - App\AdminModule\ConfigurationModule\Components\ICustomInputsGridControlFactory
    - App\AdminModule\ConfigurationModule\Components\IDiscountsGridControlFactory
    - App\AdminModule\ConfigurationModule\Components\IPlacePointsGridControlFactory
    - App\AdminModule\ConfigurationModule\Components\ISkautIsEventEducationGridControlFactory
    - App\AdminModule\ConfigurationModule\Components\ISubeventsGridControlFactory
    - App\AdminModule\MailingModule\Components\IMailHistoryGridControlFactory
    - App\AdminModule\MailingModule\Components\IMailTemplatesGridControlFactory
    - App\AdminModule\PaymentsModule\Components\IPaymentsGridControlFactory
    - App\AdminModule\ProgramModule\Components\IProgramBlocksGridControlFactory
    - App\AdminModule\ProgramModule\Components\IProgramCategoriesGridControlFactory
    - App\AdminModule\ProgramModule\Components\IProgramAttendeesGridControlFactory
    - App\AdminModule\ProgramModule\Components\IRoomsGridControlFactory
    - App\AdminModule\ProgramModule\Components\IRoomScheduleGridControlFactory

    - App\AdminModule\Forms\BaseFormFactory
    - App\AdminModule\Forms\AddLectorFormFactory
    - App\AdminModule\Forms\AddRoleFormFactory
    - App\AdminModule\Forms\EditRoleFormFactory
    - App\AdminModule\Forms\EditUserPersonalDetailsFormFactory
    - App\AdminModule\Forms\EditUserSeminarFormFactory
    - App\AdminModule\CmsModule\Forms\FaqFormFactory
    pageFormFactory:
        factory: App\AdminModule\CmsModule\Forms\PageForm(%id%, %area%, ...)
        implement: App\AdminModule\CmsModule\Forms\IPageFormFactory
        parameters: [id, area]
    - App\AdminModule\CmsModule\Forms\NewsFormFactory
    - App\AdminModule\ConfigurationModule\Forms\ApplicationFormFactory
    - App\AdminModule\ConfigurationModule\Forms\BankFormFactory
    - App\AdminModule\ConfigurationModule\Forms\CustomInputFormFactory
    discountFormFactory:
        factory: App\AdminModule\ConfigurationModule\Forms\DiscountForm(%id%, ...)
        implement: App\AdminModule\ConfigurationModule\Forms\IDiscountFormFactory
        parameters: [id]
    - App\AdminModule\ConfigurationModule\Forms\MailingFormFactory
    paymentFormFactory:
        factory: App\AdminModule\ConfigurationModule\Forms\PaymentForm
        implement: App\AdminModule\ConfigurationModule\Forms\IPaymentFormFactory
    - App\AdminModule\ConfigurationModule\Forms\PaymentProofFormFactory
    - App\AdminModule\ConfigurationModule\Forms\PlaceDescriptionFormFactory
    - App\AdminModule\ConfigurationModule\Forms\PlacePointFormFactory
    - App\AdminModule\ConfigurationModule\Forms\ProgramFormFactory
    - App\AdminModule\ConfigurationModule\Forms\SeminarFormFactory
    - App\AdminModule\ConfigurationModule\Forms\SkautIsEventFormFactory
    - App\AdminModule\ConfigurationModule\Forms\SubeventFormFactory
    - App\AdminModule\ConfigurationModule\Forms\SubeventsFormFactory
    - App\AdminModule\ConfigurationModule\Forms\TicketsFormFactory
    - App\AdminModule\ConfigurationModule\Forms\WebFormFactory
    - App\AdminModule\PaymentsModule\Forms\EditPaymentFormFactory
    - App\AdminModule\ProgramModule\Forms\BlockFormFactory
    - App\AdminModule\MailingModule\Forms\EditTemplateFormFactory
    - App\AdminModule\MailingModule\Forms\SendFormFactory

extensions:
    # Console
    console: Contributte\Console\DI\ConsoleExtension(%consoleMode%)

    # Common
    nettrine.annotations: Nettrine\Annotations\DI\AnnotationsExtension
    nettrine.cache: Nettrine\Cache\DI\CacheExtension
    nettrine.migrations: Nettrine\Migrations\DI\MigrationsExtension

    # DBAL
    nettrine.dbal: Nettrine\DBAL\DI\DbalExtension
    nettrine.dbal.console: Nettrine\DBAL\DI\DbalConsoleExtension

    # ORM
    nettrine.orm: Nettrine\ORM\DI\OrmExtension
    nettrine.orm.cache: Nettrine\ORM\DI\OrmCacheExtension
    nettrine.orm.console: Nettrine\ORM\DI\OrmConsoleExtension(%consoleMode%)
    nettrine.orm.annotations: Nettrine\ORM\DI\OrmAnnotationsExtension

    webloader: WebLoader\Nette\Extension
    skautis: Skautis\Nette\SkautisExtension
    translation: Contributte\Translation\DI\TranslationExtension
    mailing: Ublaboo\Mailing\DI\MailingExtension
    recaptcha: Contributte\ReCaptcha\DI\ReCaptchaExtension
    messageBus: eGen\MessageBus\DI\MessageBusExtension

console:
    name: SRS
    catchExceptions: true
    autoExit: true
    lazy: false

nettrine.dbal:
    debug:
        panel: %debugMode%
    connection:
        charset: utf8mb4
        default_table_options:
            charset: utf8mb4
            collate: utf8mb4_unicode_ci

nettrine.orm:
    configuration:
        customStringFunctions:
            regexp: DoctrineExtensions\Query\Mysql\Regexp

nettrine.orm.annotations:
    mapping:
       App\Model: %appDir%/Model

nettrine.migrations:
    directory: %appDir%/../migrations

mailing:
    do: both
    logDirectory: '%appDir%/../log/mails'

translation:
    locales:
        whitelist: [cs]
        default: cs
        fallback: [cs]
    dirs:
        - %appDir%/lang

messageBus:
    commandBus:
    eventBus:
    queryBus:

latte:
    macros:
        - Nextras\FormsRendering\LatteMacros\Bs3InputMacros::install

webloader:
    css:
        web:
            files:
                - css/libs/jquery/jquery-ui.min.css
                - %appDir%/../vendor/twbs/bootstrap/dist/css/bootstrap.min.css
                - css/libs/font-awesome.min.css
                - css/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/css/bootstrap-select.css
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/css/fileinput.min.css
                - css/libs/ublaboo-datagrid/happy.min.css
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid.css
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-spinners.css
                - css/web/layout.css
                - css/web/style.css

        admin:
            files:
                - css/libs/jquery/jquery-ui.min.css
#                - libs/jquery/jquery.floatingscroll.css
                - %appDir%/../vendor/twbs/bootstrap/dist/css/bootstrap.min.css
                - css/libs/font-awesome.min.css
                - css/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.css
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/css/bootstrap-select.css
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/css/fileinput.min.css
                - css/libs/ublaboo-datagrid/happy.min.css
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid.css
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-spinners.css
                - css/admin/style.css

        install:
            files:
                - %appDir%/../vendor/twbs/bootstrap/dist/css/bootstrap.min.css
                - css/install/style.css

        export:
            files:
                - css/export/style.css

    js:
        web:
            files:
                - js/libs/jquery/jquery-3.4.1.min.js
                - js/libs/live-form-validation.js
                - js/libs/nette.ajax.js
                - js/libs/jquery/jquery-ui.min.js
                - js/libs/jquery/jquery.mousewheel.min.js
                - %appDir%/../vendor/twbs/bootstrap/dist/js/bootstrap.bundle.min.js
                - js/libs/moment/moment.js
                - js/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js
                - js/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.cs.js
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/js/bootstrap-select.js
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/js/i18n/defaults-cs_CZ.js
                - js/libs/bootstrap-confirmation/bootstrap-confirmation.min.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/js/fileinput.min.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/themes/fa/theme.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/js/locales/cs.js
                - js/libs/ublaboo-datagrid/happy.min.js
#                - libs/ublaboo-datagrid/datagrid.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-instant-url-refresh.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-spinners.js
                - js/main.js

        admin:
            files:
                - js/libs/jquery/jquery-3.4.1.min.js
                - js/libs/live-form-validation.js
                - js/libs/nette.ajax.js
                - js/libs/jquery/jquery-ui.min.js
                - js/libs/jquery/jquery.mousewheel.min.js
#                - libs/jquery/jquery.floatingscroll.min.js
                - %appDir%/../vendor/twbs/bootstrap/dist/js/bootstrap.bundle.min.js
                - js/libs/moment/moment.js
                - js/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.min.js
                - js/libs/bootstrap-datetimepicker/bootstrap-datetimepicker.cs.js
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/js/bootstrap-select.js
                - %appDir%/../vendor/snapappointments/bootstrap-select/dist/js/i18n/defaults-cs_CZ.js
                - js/libs/bootstrap-confirmation/bootstrap-confirmation.min.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/js/fileinput.min.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/themes/fa/theme.js
                - %appDir%/../vendor/kartik-v/bootstrap-fileinput/js/locales/cs.js
                - js/libs/ublaboo-datagrid/happy.min.js
#                - libs/ublaboo-datagrid/datagrid.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-instant-url-refresh.js
                - %appDir%/../vendor/ublaboo/datagrid/assets/datagrid-spinners.js
                - js/main.js

        install:
            files:
                - js/libs/jquery/jquery-3.4.1.min.js
                - %appDir%/../vendor/twbs/bootstrap/dist/js/bootstrap.bundle.min.js
